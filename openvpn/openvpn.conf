# OpenVPN server config
# https://community.openvpn.net/openvpn/wiki/GettingStartedwithOVPN
mode server

port 1194
proto udp
dev tun
user nobody
group nogroup
persist-key
persist-tun
verb 3 # verbosity

# The --tls-auth option uses a static pre-shared key (PSK) that must be
# generated in advance and shared among all peers

tls-auth ta.key 0

auth SHA512
cipher AES-256-CBC

ca          /etc/opevpn/ca.crt
cert        /etc/opevpn/server.crt
crl-verify  /etc/opevpn/crl.pem
dh          /etc/opevpn/dh.pem
key         /etc/opevpn/server.key

keepalive 10 240
max-clients 5

compress lz4-v2
push "compress lz4-v2"

# This sets up a VPN subnet using the 10.8.0.XX address scope.
# The server will become 10.8.0.1, and the clients will start at 10.8.0.2.
topology subnet
server 10.8.0.0 255.255.255.0

push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS 172.31.0.2"

# Misc conf from auto generated setup
status openvpn-status.log
ifconfig-pool-persist ipp.txt
